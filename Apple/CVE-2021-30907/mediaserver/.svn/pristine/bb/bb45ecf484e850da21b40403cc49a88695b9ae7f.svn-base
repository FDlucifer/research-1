#ifndef _MEDIA_SB_AUDIO_QUEUE_H_
#define _MEDIA_SB_AUDIO_QUEUE_H_

#include <stdint.h>

#ifndef CONSOLE
int aq_go(void);
#endif /* CONSOLE */

typedef uint64_t (*allocate_buffer_fn_t)(uint64_t, uint64_t, uint32_t, uint64_t, uint32_t, void*, int);
typedef struct aq_context_s aq_context_t;
struct aq_context_s {

    mach_port_t audio_queue_service_port;

    // Addresses for functions and global variables
    allocate_buffer_fn_t allocate_buffer_fn;

    struct {
        uint64_t remote_start;
        uint64_t local_start;
        uint32_t shared_capacity;
    } current_stat;

    struct {
        uint32_t queue_id;
        mach_port_t shared_mem_entry;
        uint64_t remote_start;
        uint64_t local_start;
    } assist;
};

#endif /* _MEDIA_SB_AUDIO_QUEUE_H_ */
