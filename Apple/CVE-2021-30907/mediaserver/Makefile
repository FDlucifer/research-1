CC=clang
CPP=clang++
SDK=$(shell xcrun --sdk iphoneos --show-sdk-path)
CFLAGS=-isysroot $(SDK) -arch arm64e
CCFLAGS=-framework AudioToolbox -framework CoreFoundation
MACROS=-DCONSOLE

all : mediaserver

TARGET=mediaserver

HEADERS=audio_queue.h utils/pac.h utils/mem_util.h
SOURCES=audio_queue.c utils/mem_util.c



$(TARGET) : $(SOURCES)
	clang-format -i $(HEADERS)
	clang-format -i $(SOURCES)
	$(CC) $(MACROS) $(CFLAGS) $(CCFLAGS) $^ -o $@ 


.PHONY : clean
clean:
	-rm -f $(TARGET) 

